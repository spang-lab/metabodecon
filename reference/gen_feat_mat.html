<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate Feature Matrix. — gen_feat_mat • metabodecon</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Feature Matrix. — gen_feat_mat"><meta name="description" content="Helper function of align(). Should not be called directly by the user.
Generates a list of elements required by speaq_align().
See 'Value' for a detailed description of the list elements.
Direct usage of this function has been deprecated with metabodecon version
1.4.3 and will be removed with metabodecon version 2.0.0.
"><meta property="og:description" content="Helper function of align(). Should not be called directly by the user.
Generates a list of elements required by speaq_align().
See 'Value' for a detailed description of the list elements.
Direct usage of this function has been deprecated with metabodecon version
1.4.3 and will be removed with metabodecon version 2.0.0.
"><meta property="og:image" content="https://spang-lab.github.io/metabodecon/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">metabodecon</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.6.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Get_Started.html">Get Started</a></li>
    <li><a class="dropdown-item" href="../articles/FAQ.html">FAQ</a></li>
    <li><a class="dropdown-item" href="../articles/MetaboDecon1D.html">MetaboDecon1D</a></li>
    <li><a class="dropdown-item" href="../articles/Datasets.html">Datasets</a></li>
    <li><a class="dropdown-item" href="../articles/Contributing.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../articles/Compatibility.html">Compatibility</a></li>
    <li><a class="dropdown-item" href="../articles/Classes.html">Metabodecon Classes</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/spang-lab/metabodecon/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Generate Feature Matrix.</h1>
      <small class="dont-index">Source: <a href="https://github.com/spang-lab/metabodecon/blob/v1.6.1/R/align.R" class="external-link"><code>R/align.R</code></a></small>
      <div class="d-none name"><code>gen_feat_mat.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Helper function of <code><a href="align.html">align()</a></code>. Should not be called directly by the user.</p>
<p>Generates a list of elements required by <code><a href="speaq_align.html">speaq_align()</a></code>.
See 'Value' for a detailed description of the list elements.</p>
<p>Direct usage of this function has been deprecated with metabodecon version
1.4.3 and will be removed with metabodecon version 2.0.0.</p>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gen_feat_mat</span><span class="op">(</span></span>
<span>  <span class="va">data_path</span>,</span>
<span>  ppm_range <span class="op">=</span> <span class="fu"><a href="get_ppm_range.html">get_ppm_range</a></span><span class="op">(</span><span class="va">data_path</span><span class="op">)</span>,</span>
<span>  si_size_real_spectrum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">data_path</span><span class="op">$</span><span class="va">y_values</span><span class="op">)</span>,</span>
<span>  scale_factor_x <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  warn <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data-path">data_path<a class="anchor" aria-label="anchor" href="#arg-data-path"></a></dt>
<dd><p>A list of deconvoluted spectra as returned by
<code><a href="generate_lorentz_curves.html">generate_lorentz_curves()</a></code>. In older versions, this could also be the path
passed to <code><a href="generate_lorentz_curves.html">generate_lorentz_curves()</a></code>, but this is deprecated and will
trigger a warning. See 'Details' for more information.</p></dd>


<dt id="arg-ppm-range">ppm_range<a class="anchor" aria-label="anchor" href="#arg-ppm-range"></a></dt>
<dd><p>The ppm range over which your signals are distributed.</p></dd>


<dt id="arg-si-size-real-spectrum">si_size_real_spectrum<a class="anchor" aria-label="anchor" href="#arg-si-size-real-spectrum"></a></dt>
<dd><p>Number of data points in your spectra.</p></dd>


<dt id="arg-scale-factor-x">scale_factor_x<a class="anchor" aria-label="anchor" href="#arg-scale-factor-x"></a></dt>
<dd><p>The x scale factor used during the deconvolution.</p></dd>


<dt id="arg-warn">warn<a class="anchor" aria-label="anchor" href="#arg-warn"></a></dt>
<dd><p>Whether to print a warning in case a file path is passed to
<code>data_path</code> instead of a list of deconvoluted spectra.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with the following elements:</p>
<p><code>data_matrix</code>: A data.frame where each row corresponds to one spectrum and
each column to one data point, i.e. for 10 input spectra
with 131072 data points each <code>data_matrix</code> would have
dimensions 10 x 131072.</p>
<p><code>peakList</code>: A list of vectors, where each vector contains the indices of
the peaks in the corresponding spectrum. The indices increase
from left to right, i.e. the smallest index corresponds to the
highest ppm value, as the ppm values decrease from left to
right.</p>
<p><code>w</code>: A list of vectors where each vector contains the "position parameter"
of the peaks in the corresponding spectrum.</p>
<p><code>A</code>: A list of vectors where each vector contains the "area parameter" of
the peaks in the corresponding spectrum.</p>
<p><code>lambda</code>: A list of vectors where each vector contains the "width
parameter" of the peaks in the corresponding spectrum.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Before version 1.2 of metabodecon, the deconvolution functions
<code>generate_lorentz_curves</code> and <code>MetaboDecon1D</code> wrote their output partially as
txt files to their input folder. Back then, <code>gen_feat_mat()</code> used those txt
files as input to generate the feature matrix. Since version 1.2 these txt
files are no longer created by default, to prevent accidental modifications
of the input folders. Therefore, the recommended way to pass the required
information to <code>gen_feat_mat()</code> is to directly pass the output of
<code><a href="generate_lorentz_curves.html">generate_lorentz_curves()</a></code> to <code>gen_feat_mat()</code>. However, to stay backwards
compatible, the name of parameter <code>data_path</code> was not changed and passing an
actual path to <code>data_path</code> is still possible, but will result in a warning
(unless <code>warn</code> is set to <code>FALSE</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>2021-2024 Wolfram Gronwald: initial version.<br>
2024-2025 Tobias Schmidt: refactored initial version.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">sim_subset</span> <span class="op">&lt;-</span> <span class="fu"><a href="metabodecon_file.html">metabodecon_file</a></span><span class="op">(</span><span class="st">"sim_subset"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">decons</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate_lorentz_curves.html">generate_lorentz_curves_sim</a></span><span class="op">(</span><span class="va">sim_subset</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu">gen_feat_mat</span><span class="op">(</span><span class="va">decons</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">obj</span>, <span class="fl">2</span>, give.attr <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ data_matrix: num [1:2, 1:2048] 0.0122 0.0105 0.0122 0.0106 0.0123 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ peakList   :List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ sim_01: num [1:27] 486 529 560 630 702 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ sim_02: num [1:30] 552 590 636 691 766 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ w          :List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ sim_01: num [1:27] 1.56 1.52 1.49 1.42 1.35 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ sim_02: num [1:30] 1.5 1.46 1.41 1.36 1.28 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ A          :List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ sim_01: num [1:27] -0.000158 -0.060544 -0.001124 -0.155302 -0.019516 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ sim_02: num [1:30] -0.00377 -0.05931 -0.00255 -0.14508 -0.01957 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ lambda     :List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ sim_01: num [1:27] -0.00713 -0.00763 -0.008 -0.00838 -0.00732 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ sim_02: num [1:30] -0.01002 -0.00794 -0.01318 -0.00856 -0.00757 ...</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tobias Schmidt, Martina Haeckl, Wolfram Gronwald.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

