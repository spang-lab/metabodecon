<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Align Spectra — align • metabodecon</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Align Spectra — align"><meta name="description" content="Align signals across  a  list  of  deconvoluted  spectra  using  the  'CluPA'
algorithm from the 'speaq' package, described  in  Beirnaert  et  al.  (2018)
doi:10.1371/journal.pcbi.1006018     and     Vu     et      al.      (2011)
doi:10.1186/1471-2105-12-405 plus the additional peak combination described
in combine_peaks()."><meta property="og:description" content="Align signals across  a  list  of  deconvoluted  spectra  using  the  'CluPA'
algorithm from the 'speaq' package, described  in  Beirnaert  et  al.  (2018)
doi:10.1371/journal.pcbi.1006018     and     Vu     et      al.      (2011)
doi:10.1186/1471-2105-12-405 plus the additional peak combination described
in combine_peaks()."><meta property="og:image" content="https://spang-lab.github.io/metabodecon/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">metabodecon</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.6.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Get_Started.html">Get Started</a></li>
    <li><a class="dropdown-item" href="../articles/FAQ.html">FAQ</a></li>
    <li><a class="dropdown-item" href="../articles/MetaboDecon1D.html">MetaboDecon1D</a></li>
    <li><a class="dropdown-item" href="../articles/Datasets.html">Datasets</a></li>
    <li><a class="dropdown-item" href="../articles/Contributing.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../articles/Compatibility.html">Compatibility</a></li>
    <li><a class="dropdown-item" href="../articles/Classes.html">Metabodecon Classes</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/spang-lab/metabodecon/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Align Spectra</h1>
      <small class="dont-index">Source: <a href="https://github.com/spang-lab/metabodecon/blob/v1.6.2/R/align.R" class="external-link"><code>R/align.R</code></a></small>
      <div class="d-none name"><code>align.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Align signals across  a  list  of  deconvoluted  spectra  using  the  'CluPA'
algorithm from the 'speaq' package, described  in  Beirnaert  et  al.  (2018)
<a href="doi:10.1371/journal.pcbi.1006018">doi:10.1371/journal.pcbi.1006018</a>     and     Vu     et      al.      (2011)
<a href="doi:10.1186/1471-2105-12-405">doi:10.1186/1471-2105-12-405</a> plus the additional peak combination described
in <code><a href="combine_peaks.html">combine_peaks()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">align</span><span class="op">(</span><span class="va">x</span>, maxShift <span class="op">=</span> <span class="fl">50</span>, maxCombine <span class="op">=</span> <span class="fl">5</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, install_deps <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>An object of  type  <code>decons1</code>  or  <code>decons2</code>  as  described  in  <a href="https://spang-lab.github.io/metabodecon/articles/Classes.html">Metabodecon Classes</a>.   To
align <code>decons0</code> objects (as returned by the now deprecated  <a href="MetaboDecon1D.html">MetaboDecon1D</a>),
you can use <code><a href="as_metabodecon_class.html">as_decons2()</a></code> to convert it to a <code>decons2</code> object first.</p></dd>


<dt id="arg-maxshift">maxShift<a class="anchor" aria-label="anchor" href="#arg-maxshift"></a></dt>
<dd><p>Maximum number of points along the "ppm-axis" a value can  be  moved  by  the
'speaq' package. 50 is a suitable starting value for plasma  spectra  with  a
digital resolution of 128K. Note that this parameter has to  be  individually
optimized  depending  on  the  type  of  analyzed  spectra  and  the  digital
resolution. For urine which is more prone to chemical shift  variations  this
value most probably has to be increased. Passed  as  argument  <code>maxShift</code>  to
<code><a href="speaq_align.html">speaq_align()</a></code>.</p></dd>


<dt id="arg-maxcombine">maxCombine<a class="anchor" aria-label="anchor" href="#arg-maxcombine"></a></dt>
<dd><p>Amount of adjacent columns which may be combined for improving the alignment.
Passed as argument <code>range</code> to <code><a href="combine_peaks.html">combine_peaks()</a></code>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Whether to print additional information during the alignment process.</p></dd>


<dt id="arg-install-deps">install_deps<a class="anchor" aria-label="anchor" href="#arg-install-deps"></a></dt>
<dd><p>Alignment  relies  on  the  'speaq'  package,  which  itself  relies  on  the
'MassSpecWavelet' and 'impute' packages. Both, 'MassSpecWavelet' and 'impute'
are   not   available    on    CRAN,    but    can    be    installed    from
<a href="https://www.bioconductor.org/" class="external-link">Bioconductor</a>                              or
<a href="https://r-universe.dev/" class="external-link">R-Universe</a>. If <code>install_deps=TRUE</code>, these packages
will  be  automatically  installed  from  R-Universe   without   asking   for
confirmation. If <code>install_deps=NULL</code> (default), the user will  be  asked  for
confirmation  before  installing  missing   dependencies.   If   asking   for
confirmation is not possible or <code>install_deps=FALSE</code>, the function will raise
an error if the packages are not installed.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of type <code>align</code> as described in <a href="https://spang-lab.github.io/metabodecon/articles/Classes.html">Metabodecon Classes</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>2024-2025 Tobias Schmidt: initial version.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="co"># Example requires an interactive R session, because in case of missing</span></span></span>
<span class="r-in"><span>    <span class="co"># dependencies the user will be asked for confirmation to install them.</span></span></span>
<span class="r-in"><span>    <span class="va">decons</span> <span class="op">&lt;-</span> <span class="fu"><a href="deconvolute.html">deconvolute</a></span><span class="op">(</span><span class="va">sim</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, sfr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3.55</span>, <span class="fl">3.35</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="va">aligned</span> <span class="op">&lt;-</span> <span class="fu">align</span><span class="op">(</span><span class="va">decons</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tobias Schmidt, Martina Haeckl, Wolfram Gronwald.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

