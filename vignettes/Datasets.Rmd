---
title: "Datasets"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Datasets}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# Blood

TODO

# Urine

TODO

# Latin Square

TODO

# Simulated Datasets

There are scenarios, where it is useful to work with simulated datasets, instead of real data, e.g.

- When you need to know the underlying distribution of the data, to be able to check whether a function works as expected
- To speed up testcases and/or examples, where a few datapoints are sufficient to test/showcase a function

For such cases, `metabodecon` comes with a set of simulated datasets, which were generated as follows:

1. Download example blood datasets
2. Deconvolute these spectra using the `generate_lorentz_curves` function with default parameters
3. Extract peak parameters (x0, lambda, A) for all peaks found between 3.55 and 3.45 ppm
4. Generate a new dataset for each deconvoluted spectrum ranging from 3.6 to 3.4 ppm by using the extracted peak parameters as ground truth and calculating the signal intensity as superposition of Lorentzian functions. The resolution of the simulated spectra, i.e. the number of datapoints per ppm, is kept constant. [^1]
5. Add noise to the simulated spectra

[^1] Given, that all blood spectra have 131072 datapoints over a range of approx. 20 ppm (14.8 ppm to -5.2), we get approx. 1310 datapoints per 0.2 ppm interval (3.6 - 3.4 ppm). Sidenote: for the blood spectra the 14.8 to -5.2 ppm range corresponds to a 600.244 MHz to 600.256 MHz range and a magnetic field strength of 14.1 T, i.e., the 3.6 to 3.4 ppm range corresponds to a 600.250660 MHz to 600.250780 MHz range.

The 16 simuated spectra are plotted in [Figure 1: Simulated Datasets](). For further details about the simulation process, see the source code of function `simulate_spectra()`.
