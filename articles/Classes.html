<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Metabodecon Classes • metabodecon</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Metabodecon Classes">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">metabodecon</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Get_Started.html">Get Started</a></li>
    <li><a class="dropdown-item" href="../articles/FAQ.html">FAQ</a></li>
    <li><a class="dropdown-item" href="../articles/MetaboDecon1D.html">MetaboDecon1D</a></li>
    <li><a class="dropdown-item" href="../articles/Datasets.html">Datasets</a></li>
    <li><a class="dropdown-item" href="../articles/Contributing.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../articles/Compatibility.html">Compatibility</a></li>
    <li><a class="dropdown-item" href="../articles/Classes.html">Metabodecon Classes</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/spang-lab/metabodecon/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Metabodecon Classes</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/spang-lab/metabodecon/blob/v1.4.3/vignettes/Classes.Rmd" class="external-link"><code>vignettes/Classes.Rmd</code></a></small>
      <div class="d-none name"><code>Classes.Rmd</code></div>
    </div>

    
    
<p>Metabodecon introduces a set of classes to highlight the presence of
certain elements in corresponding objects. The order of elements may
vary between different versions of Metabodecon, thus elements should
always be accessed by name, for example, using <code>x$si</code> or
<code>x[["cs"]]</code>. Elements marked as optional can be present, NULL
or missing, i.e. they should only be used conditionally.</p>
<p>The classes itself are described in section <a href="#class-overview">Class Overview</a>. The elements associated with
a class are described in section <a href="#elements">Elements</a>. A
graphical visualization of the classes and their corresponding functions
is given in figure <a href="#metabodecon-workflow">Metabodecon
Workflow</a>.</p>
<div class="section level2">
<h2 id="class-overview">Class Overview<a class="anchor" aria-label="anchor" href="#class-overview"></a>
</h2>
<div class="section level3">
<h3 id="spectrum">spectrum<a class="anchor" aria-label="anchor" href="#spectrum"></a>
</h3>
<p>Represents one NMR spectrum. Objects of class ‘spectrum’ have at
least elements 1-3 from section <a href="#elements-v1-2">Elements
v1.2+</a>.</p>
</div>
<div class="section level3">
<h3 id="decon0">decon0<a class="anchor" aria-label="anchor" href="#decon0"></a>
</h3>
<p>Represents one deconvoluted NMR spectrum stored in the old <a href="https://spang-lab.github.io/metabodecon/reference/MetaboDecon1D.html">MetaboDecon1D()</a>
format. Objects of class ‘decon0’ have at least elements 1-18 from
section <a href="#elements-v0-2">Elements v0.2+</a>.</p>
</div>
<div class="section level3">
<h3 id="decon1">decon1<a class="anchor" aria-label="anchor" href="#decon1"></a>
</h3>
<p>Represents one deconvoluted NMR spectrum stored in the backwards
compatible <a href="https://spang-lab.github.io/metabodecon/reference/generate_lorentz_curves.html">generate_lorentz_curves()</a>
format. Objects of class ‘decon1’ have all elements from section <a href="#elements-v0-2">Elements v0.2+</a>.</p>
</div>
<div class="section level3">
<h3 id="decon2">decon2<a class="anchor" aria-label="anchor" href="#decon2"></a>
</h3>
<p>Represents one deconvoluted NMR spectrum stored in the new <a href="https://spang-lab.github.io/metabodecon/reference/deconvolute()">deconvolute()</a>
format. Objects of class ‘decon2’ have all elements from section <a href="#elements-v1-2">Elements v1.2+</a> with elements
<code>sit$al</code> and <code>lcpar$x0al</code> set to
<code>NULL</code>.</p>
</div>
<div class="section level3">
<h3 id="align">align<a class="anchor" aria-label="anchor" href="#align"></a>
</h3>
<p>Represents one deconvoluted NMR spectrum for which the individual
peaks have been aligned using [align()]. Objects of class ‘align’ have
all elements from section <a href="#elements-v1-2">Elements
v1.2+</a>.</p>
</div>
<div class="section level3">
<h3 id="collections">Collections<a class="anchor" aria-label="anchor" href="#collections"></a>
</h3>
<p>The classes mentioned above represent individual objects, such as a
single spectrum, deconvolution, or alignment. However, it is often
useful to describe collections of these objects, such as a list of
spectra or deconvolutions. Therefore, for each individual class, a
corresponding “collection” class is provided. These collection classes
are named: <a href="#spectra">spectra</a>, <a href="#decons0">decons0</a>, <a href="#decons1">decons1</a>, <a href="#decons2">decons2</a>, and <a href="#aligns">aligns</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="elements">Elements<a class="anchor" aria-label="anchor" href="#elements"></a>
</h2>
<div class="section level3">
<h3 id="elements-v1-2">Elements v1.2+<a class="anchor" aria-label="anchor" href="#elements-v1-2"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<code>cs</code>: Vector of chemical shifts (CS) in parts per million
(ppm). Must be of the same length as <code>si</code>.</li>
<li>
<code>si</code>: Vector of signal intensities (SI) in arbitrary
units (au). Element <code>si[i]</code> is the signal intensity measured
at chemical shift <code>cs[i]</code>, i.e. <code>si</code> must be of
the same length as <code>cs</code>.</li>
<li>
<code>meta</code>: Optional. List of metadata about the spectrum,
e.g.:
<ul>
<li>
<code>name</code>: Optional. The name of the spectrum,
e.g. <code>"Blood 1"</code> or <code>"Urine 2"</code>.</li>
<li>
<code>path</code>: Optional. The path of the file/folder containing
the spectrum data. E.g.
<code>"example_datasets/jcampdx/urine/urine_1.dx"</code> or
<code>"example_datasets/bruker/urine/urine"</code>.</li>
<li>
<code>type</code>: Optional. The type of experiment,
e.g. <code>"H1 CPMG"</code> or <code>"H1 NOESY"</code>.</li>
<li>
<code>fq</code>: Optional. Vector of signal frequencies in Hertz
(Hz). Must be of the same length as <code>si</code> and
<code>cs</code>.</li>
<li>
<code>mfs</code>: Optional. Magnetic field strength in Tesla,
e.g. <code>14.1</code>.</li>
<li>
<code>simpar</code>: Optional. True Lorentz Curve parameters. List
with elements <code>A</code>, <code>lambda</code> and <code>x0</code>.
For details see element <code>lcpar</code>. Only available if a spectrum
has been simulated.</li>
</ul>
</li>
<li>
<code>args</code>: Optional. List of deconvolution parameters, i.e.:
<ul>
<li>
<code>nfit</code>: Optional. The number of fitting iterations.</li>
<li>
<code>smopts</code>: Optional. The smoothing parameters used for the
deconvolution.</li>
<li>
<code>delta</code>: Optional. The threshold used for peak
filtering.</li>
<li>
<code>sfr</code>: Optional. Borders of the signal free region in
ppm.</li>
<li>
<code>wshw</code>: Optional. Water signal half width in ppm.</li>
<li>
<code>ask</code>: Optional. Whether interactive mode was
enabled.</li>
<li>
<code>verbose</code>: Optional. Whether verbose output was
enabled.</li>
<li>
<code>bwc</code>: Optional. Level of backwards compatibility used by
internal calculations.</li>
<li>
<code>nworkers</code>: Optional. Number of workers used for parallel
processing.</li>
<li>
<code>use_rust</code>: Optional. Whether the Rust backend was used
for deconvolution. <em>(v1.4.0+)</em>
</li>
<li>
<code>rtyp</code>: Optional. Object type returned by internal
function <code>deconvolute_spectrum</code>. <em>(v1.4.0+)</em>
</li>
</ul>
</li>
<li>
<code>sit</code>: Dataframe of Signal Intensities (SI) after
applying various transformations:
<ul>
<li>
<code>wsrm</code>: SIs after Water Signal Removal (WSRM),</li>
<li>
<code>nvrm</code>: SIs after WSRM and Negative Value Removal
(NVRM).</li>
<li>
<code>sm</code>: SIs after WSRM, NVRM and smoothing.</li>
<li>
<code>sup</code>: SIs as superposition of Lorentz Curves.</li>
<li>
<code>supal</code>: SIs as superposition of aligned Lorentz Curves.
<em>(v1.4.0+)</em>
</li>
<li>
<code>al</code>: SIs as integrals of aligned Lorentz Curves. I.e.,
the intensity of a peak-center-datapoint equals the integral value of
the corresponding peak. The intensity of a other datapoints is
zero.</li>
</ul>
</li>
<li>
<code>peak</code>: Dataframe of peak triplets found during peak
selection:
<ul>
<li>
<code>center</code>: Indices of peak centers.</li>
<li>
<code>left</code>: Indices of left borders.</li>
<li>
<code>right</code>: Indices of right peak borders.</li>
</ul>
</li>
<li>
<code>lcpar</code>: Dataframe of Lorentz Curve parameters after
parameter approximation:
<ul>
<li>
<code>A</code>: Amplitude parameter.</li>
<li>
<code>lambda</code>: Halfwidth parameter.</li>
<li>
<code>x0</code>: Center parameter.</li>
<li>
<code>x0al</code>: Center parameter after the spectrum has been
aligned.</li>
</ul>
</li>
<li>
<code>mse</code>: List of Mean squared error (MSE):
<ul>
<li>
<code>raw</code>: MSE between <code>si</code> and
<code>sit$sup</code>
</li>
<li>
<code>norm</code>: MSE between <code>si</code> and
<code>sit$sup</code>, divided by <code>sum(sit$sup)</code>
</li>
<li>
<code>sm</code>: MSE between <code>sit$sm</code> and
<code>sit$sup</code>
</li>
<li>
<code>smnorm</code>: MSE between <code>sit$sm</code> and
<code>sit$sup</code>, divided by <code>sum(sit$sup)</code>. Equals
<code>mse_normed</code> in <a href="#elements-v0-2">Elements
v0.2+</a>.</li>
</ul>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="elements-v0-2">Elements v0.2+<a class="anchor" aria-label="anchor" href="#elements-v0-2"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<code>filename</code>: Name of the analyzed spectrum.</li>
<li>
<code>x_values</code>: Scaled datapoint numbers (SDP). Datapoints
are numbered in descending order going from N-1 to 0, where N equals the
total amount of data points. Scaled data point numbers are obtained by
dividing these numbers by the scale factor of the x-axis. I.e., for a
spectrum with 131072 datapoints and a scale factor of 1000, the first
scale datapoint has value 131.071 and the last one has value 0.</li>
<li>
<code>x_values_ppm</code>: The chemical shift of each datapoint in
ppm (parts per million).</li>
<li>
<code>y_values</code>: The scaled signal intensity (SSI) of each
datapoint. Obtained by reading the raw intensity values from the
provided <code>data_path</code> as integers and dividing them scale
factor of the y-axis.</li>
<li>
<code>spectrum_superposition</code>: Scaled signal intensity
obtained by calculating the sum of all estimated Lorentz Curves for each
data point.</li>
<li>
<code>mse_normed</code>: where is the normalized, smoothed signal
intensity of data point i and is the normalized superposition of Lorentz
Curves at data point i. Normalized in this context means that the
vectors were scaled so the sum over all data points equals 1.</li>
<li>
<code>peak_triplets_middle</code>: Chemical shift of peak centers in
ppm.</li>
<li>
<code>peak_triplets_left</code>: Chemical shift of left peak borders
in ppm.</li>
<li>
<code>peak_triplets_right</code>: Chemical shift of right peak
borders in ppm.</li>
<li>
<code>index_peak_triplets_middle</code>: Datapoint numbers of peak
centers.</li>
<li>
<code>index_peak_triplets_left</code>: Datapoint numbers of left
peak borders.</li>
<li>
<code>index_peak_triplets_right</code>: Datapoint numbers of right
peak borders.</li>
<li>
<code>integrals</code>: Integrals of the Lorentz Curves.</li>
<li>
<code>signal_free_region</code>: Borders of the signal free region
of the spectrum in scaled datapoint numbers. Left of the first element
and right of the second element no signals are expected. Only available
if <code><a href="../reference/MetaboDecon1D.html">MetaboDecon1D()</a></code> was called with more than one spectra as
input.</li>
<li>
<code>range_water_signal_ppm</code>: Half width of the water signal
in ppm. Potential signals in this region are ignored. Only available if
<code><a href="../reference/MetaboDecon1D.html">MetaboDecon1D()</a></code> was called with more than one spectra as
input.</li>
<li>
<code>A</code>: Amplitude parameter of the Lorentz Curves. Provided
as negative number to maintain backwards compatibility with
MetaboDecon1D. The area under the Lorentz Curve is calculated as .</li>
<li>
<code>lambda</code>: Half width of the Lorentz Curves in scaled data
points. Provided as negative value to maintain backwards compatibility
with MetaboDecon1D. Example: a value of -0.00525 corresponds to 5.25
data points. With a spectral width of 12019 Hz and 131072 data points
this corresponds to a halfwidth at half height of approx. 0.48 Hz. The
corresponding calculation is: (12019 Hz / 131071 dp) * 5.25 dp.</li>
<li>
<code>x_0</code>: Center of the Lorentz Curves in scaled data
points.</li>
<li>
<code>y_values_raw</code>: The raw signal intensity of each
datapoint</li>
<li>
<code>x_values_hz</code>: The frequency of each datapoint in Hz</li>
<li>
<code>mse_normed_raw</code>: Normalized mean squared error when
comparing the raw signal intensities with the superposition of Lorentz
Curves.</li>
<li>
<code>x_0_hz</code>: Center of the Lorentz Curves in Hz.</li>
<li>
<code>x_0_dp</code>: Center of the Lorentz Curves in data
points.</li>
<li>
<code>x_0_ppm</code>: Center of the Lorentz Curves in ppm.</li>
<li>
<code>A_hz</code>: Amplitude parameter of the Lorentz Curves in
Hz.</li>
<li>
<code>A_dp</code>: Amplitude parameter of the Lorentz Curves in data
points.</li>
<li>
<code>A_ppm</code>: Amplitude parameter of the Lorentz Curves in
ppm.</li>
<li>
<code>lambda_hz</code>: Half width of the Lorentz Curves in Hz.</li>
<li>
<code>lambda_dp</code>: Half width of the Lorentz Curves in data
points.</li>
<li>
<code>lambda_ppm</code>: Half width of the Lorentz Curves in
ppm.</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="metabodecon-workflow">Metabodecon Workflow<a class="anchor" aria-label="anchor" href="#metabodecon-workflow"></a>
</h2>
<div class="float">
<img src="Classes%2Fmetabodecon_workflow.svg" alt="Metabodecon Workflow"><div class="figcaption">Metabodecon Workflow</div>
</div>
<!-- Reference Links -->
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tobias Schmidt, Martina Haeckl, Wolfram Gronwald.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
